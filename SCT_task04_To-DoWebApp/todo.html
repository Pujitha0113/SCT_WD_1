<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do App</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); min-height: 100vh; padding: 1rem; }
        .app { max-width: 500px; margin: 0 auto; background: white; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: #667eea; color: white; padding: 1rem; text-align: center; }
        .add-form { display: flex; padding: 1rem; gap: 0.5rem; }
        input, button { padding: 0.5rem; border: 1px solid #ddd; border-radius: 5px; }
        input { flex: 1; }
        button { background: #667eea; color: white; cursor: pointer; }
        button:hover { background: #5a67d8; }
        .filters { display: flex; justify-content: center; padding: 0.5rem; background: white; }
        .filter-btn { padding: 0.5rem 1rem; border: none; color: rgb(14, 12, 12);background: none; cursor: pointer; }
        .filter-btn.active { background: #667eea; color: rgb(14, 12, 12); border-radius: 5px; }
        .task-list { list-style: none; min-height: 200px; }
        .task-item { display: flex; align-items: center; padding: 1rem; border-bottom: 1px solid #eee; cursor: move; }
        .task-item:hover { background: #f8f9fa; }
        .task-item.completed { opacity: 0.6; text-decoration: line-through; }
        .task-checkbox { margin-right: 0.5rem; }
        .task-text { flex: 1; margin-right: 0.5rem; }
        .task-date { font-size: 0.9rem; color: #666; margin-right: 0.5rem; }
        .task-actions button { background: #e53e3e; margin-left: 0.25rem; padding: 0.25rem 0.5rem; font-size: 0.8rem; }
        .task-actions button:hover { background: #c53030; }
        .edit-input { border: 1px solid #667eea; }
        @media (max-width: 480px) { .add-form { flex-direction: column; } .task-item { flex-direction: column; align-items: flex-start; gap: 0.5rem; } }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <h1>üìù To-Do List</h1>
        </div>
        <form class="add-form" id="addForm">
            <input type="text" id="taskInput" placeholder="New task..." required>
            <input type="datetime-local" id="dateInput">
            <button type="submit">Add</button>
        </form>
        <div class="filters">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="active">Active</button>
            <button class="filter-btn" data-filter="completed">Completed</button>
        </div>
        <ul class="task-list" id="taskList" draggable="true"></ul>
    </div>
    <script>
        let tasks = JSON.parse(localStorage.getItem('tasks')) || []; let filter = 'all'; let editIndex = -1;
        const taskInput = document.getElementById('taskInput'); const dateInput = document.getElementById('dateInput'); const addForm = document.getElementById('addForm'); const taskList = document.getElementById('taskList'); const filterBtns = document.querySelectorAll('.filter-btn');
        function renderTasks() { taskList.innerHTML = ''; tasks.filter(t => filter === 'all' || (filter === 'active' && !t.completed) || (filter === 'completed' && t.completed)).forEach((task, index) => { const li = document.createElement('li'); li.className = `task-item ${task.completed ? 'completed' : ''}`; li.draggable = true; li.dataset.index = index; li.innerHTML = `<input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''}> <span class="task-text">${task.text}</span> ${task.date ? `<span class="task-date">${new Date(task.date).toLocaleString()}</span>` : ''} <div class="task-actions"><button onclick="editTask(${index})">Edit</button><button onclick="deleteTask(${index})">Delete</button></div>`; li.querySelector('.task-checkbox').addEventListener('change', () => toggleComplete(index)); li.addEventListener('dragstart', e => e.dataTransfer.setData('text/plain', index)); li.addEventListener('dragover', e => e.preventDefault()); li.addEventListener('drop', e => { e.preventDefault(); const from = parseInt(e.dataTransfer.getData('text/plain')); if (from !== index) { [tasks[from], tasks[index]] = [tasks[index], tasks[from]]; saveAndRender(); } }); taskList.appendChild(li); }); }
        function addTask(text, date) { if (editIndex > -1) { tasks[editIndex].text = text; if (date) tasks[editIndex].date = date; editIndex = -1; taskInput.placeholder = 'New task...'; } else { tasks.push({ text, date: date || null, completed: false }); } saveAndRender(); taskInput.value = ''; dateInput.value = ''; }
        function toggleComplete(index) { tasks[index].completed = !tasks[index].completed; saveAndRender(); }
        function editTask(index) { const task = tasks[index]; taskInput.value = task.text; dateInput.value = task.date || ''; taskInput.placeholder = 'Edit task...'; editIndex = index; taskInput.focus(); }
        function deleteTask(index) { tasks.splice(index, 1); saveAndRender(); }
        function saveAndRender() { localStorage.setItem('tasks', JSON.stringify(tasks)); renderTasks(); }
        addForm.addEventListener('submit', e => { e.preventDefault(); if (taskInput.value.trim()) addTask(taskInput.value.trim(), dateInput.value); });
        filterBtns.forEach(btn => btn.addEventListener('click', () => { filterBtns.forEach(b => b.classList.remove('active')); btn.classList.add('active'); filter = btn.dataset.filter; renderTasks(); }));
        // Drag-drop between items handled in render
        renderTasks();
    </script>
</body>
</html>